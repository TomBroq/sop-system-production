# ==============================================
# SISTEMA DE LEVANTAMIENTO AUTOMATIZADO DE PROCESOS
# Environment Configuration
# ==============================================

# Application Configuration
NODE_ENV=development
PORT=3000
API_VERSION=v1
APP_NAME="Sistema SOP Backend"
APP_VERSION=1.0.0

# Database Configuration (Supabase PostgreSQL)
DATABASE_URL="postgresql://username:password@db.supabase.co:5432/database_name?schema=public"
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# Redis Configuration (Railway Redis)
REDIS_URL="redis://default:password@redis-service:6379"
REDIS_PASSWORD="your_redis_password"
REDIS_DB=0

# JWT Configuration
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
JWT_EXPIRES_IN="24h"
JWT_REFRESH_SECRET="your-refresh-token-secret"
JWT_REFRESH_EXPIRES_IN="7d"

# Encryption Configuration (LGPD Compliance)
ENCRYPTION_KEY="your-32-character-encryption-key"
ENCRYPTION_ALGORITHM="aes-256-gcm"

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=300000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_ADMIN_MAX=1000

# CORS Configuration
CORS_ORIGIN="http://localhost:3000,https://yourdomain.com"
CORS_CREDENTIALS=true

# Tally Forms API Integration
TALLY_API_URL="https://api.tally.so/api"
TALLY_API_KEY="your_tally_api_key"
TALLY_WEBHOOK_SECRET="your_tally_webhook_secret"

# Sistema Multiagente Integration
MULTIAGENT_API_URL="https://your-multiagent-system.com/api"
MULTIAGENT_API_KEY="your_multiagent_api_key"
MULTIAGENT_TIMEOUT_MS=120000

# Email Service Configuration (SendGrid/Resend)
EMAIL_SERVICE="sendgrid"
EMAIL_API_KEY="your_email_api_key"
EMAIL_FROM_ADDRESS="noreply@sistema-sop.com"
EMAIL_FROM_NAME="Sistema SOP"

# PDF Generation Configuration
PDF_GENERATION_TIMEOUT=30000
PDF_STORAGE_PATH="./storage/pdfs"
PDF_MAX_SIZE_MB=10

# File Upload Configuration
UPLOAD_MAX_SIZE_MB=5
UPLOAD_ALLOWED_TYPES="image/jpeg,image/png,application/pdf"
UPLOAD_STORAGE_PATH="./storage/uploads"

# Monitoring and Logging
LOG_LEVEL="info"
LOG_FILE_PATH="./logs"
LOG_MAX_SIZE="20m"
LOG_MAX_FILES="14d"

# Sentry Configuration (Error Tracking)
SENTRY_DSN="your_sentry_dsn"
SENTRY_ENVIRONMENT="development"
SENTRY_SAMPLE_RATE=1.0

# Performance Monitoring
ENABLE_METRICS=true
METRICS_COLLECTION_INTERVAL=60000

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_SECRET="your-session-secret"
COOKIE_SECURE=false
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE="lax"

# Business Rules Configuration
MIN_PROCESSES_PER_ANALYSIS=5
MAX_FORM_EXPIRY_DAYS=30
DEFAULT_ANALYSIS_TIMEOUT_MINUTES=5

# Development/Testing Configuration
ENABLE_SEED_DATA=true
ENABLE_SWAGGER_DOCS=true
ENABLE_DEBUG_ROUTES=false

# External Services Health Check URLs
HEALTH_CHECK_INTERVAL_MS=300000
EXTERNAL_SERVICES_TIMEOUT=10000

# Cache Configuration
CACHE_TTL_SECONDS=3600
CACHE_INDUSTRY_DATA_TTL=7200
CACHE_QUESTION_TEMPLATES_TTL=3600

# Queue Configuration (BullMQ)
QUEUE_REDIS_URL="redis://default:password@redis-service:6379"
QUEUE_DEFAULT_JOB_ATTEMPTS=3
QUEUE_DEFAULT_BACKOFF_DELAY=5000

# Webhook Configuration
WEBHOOK_SIGNATURE_HEADER="x-tally-signature"
WEBHOOK_TIMEOUT_MS=5000

# Backup and Maintenance
AUTO_BACKUP_ENABLED=true
AUTO_BACKUP_SCHEDULE="0 2 * * *"
DATA_RETENTION_DAYS=730

# Compliance and Audit
AUDIT_LOG_RETENTION_DAYS=2555
SENSITIVE_DATA_LOG_RETENTION_DAYS=90
GDPR_DATA_EXPORT_FORMAT="json"

# Localization
DEFAULT_LOCALE="es"
DEFAULT_TIMEZONE="America/Santiago"
SUPPORTED_LOCALES="es,en"

# API Documentation
SWAGGER_TITLE="Sistema SOP API"
SWAGGER_DESCRIPTION="API para el Sistema de Levantamiento Automatizado de Procesos"
SWAGGER_VERSION="1.0.0"
SWAGGER_CONTACT_EMAIL="api@sistema-sop.com"